
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>FqprSubset &#8212; kluster 1.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="rotations module" href="../kluster_api/rotations.html" />
    <link rel="prev" title="filter_subset_by_polygon" href="HSTB.kluster.modules.subset.filter_subset_by_polygon.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="fqprsubset">
<h1>FqprSubset<a class="headerlink" href="#fqprsubset" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">HSTB.kluster.modules.subset.</span></span><span class="sig-name descname"><span class="pre">FqprSubset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fqpr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tools for building a subset, or a smaller piece of the larger Fqpr instance.</p>
<p>fqpr = fully qualified ping record, the term for the datastore in kluster</p>
<p>Processed fqpr_generation.Fqpr instance is passed in as argument</p>
<p class="rubric">Attributes Summary</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.is_subset" title="HSTB.kluster.modules.subset.FqprSubset.is_subset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_subset</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Summary</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.get_variable_by_filter" title="HSTB.kluster.modules.subset.FqprSubset.get_variable_by_filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_variable_by_filter</span></code></a>(variable_name[, ...])</p></td>
<td><p>ping_filter is set upon selecting points in 2d/3d in Kluster.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.redo_subset" title="HSTB.kluster.modules.subset.FqprSubset.redo_subset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">redo_subset</span></code></a>()</p></td>
<td><p>Subset by the existing subset times, used after reload to get the subset back</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.restore_subset" title="HSTB.kluster.modules.subset.FqprSubset.restore_subset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">restore_subset</span></code></a>()</p></td>
<td><p>Restores the original data if subset_by_time has been run.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.return_soundings_in_polygon" title="HSTB.kluster.modules.subset.FqprSubset.return_soundings_in_polygon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">return_soundings_in_polygon</span></code></a>(polygon[, ...])</p></td>
<td><p>Using provided coordinates (in either horizontal_crs projected or geographic coordinates), return the soundings and sounding attributes for all soundings within the coordinates.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.set_filter_by_polygon" title="HSTB.kluster.modules.subset.FqprSubset.set_filter_by_polygon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_filter_by_polygon</span></code></a>(polygon[, geographic])</p></td>
<td><p>Using this method sets the ping_filter attribute so that you can now use the set_variable_by_filter and get_variable_by_filter methods to get other variables or set data within the polygon selection.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.set_variable_by_filter" title="HSTB.kluster.modules.subset.FqprSubset.set_variable_by_filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_variable_by_filter</span></code></a>(variable_name, new_data)</p></td>
<td><p>ping_filter is set upon selecting points in 2d/3d in Kluster.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.subset_by_lines" title="HSTB.kluster.modules.subset.FqprSubset.subset_by_lines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subset_by_lines</span></code></a>(line_names)</p></td>
<td><p>Use the logged start time, end time of the multibeam files to exclude data from all other lines.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.subset_by_time" title="HSTB.kluster.modules.subset.FqprSubset.subset_by_time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subset_by_time</span></code></a>([mintime, maxtime])</p></td>
<td><p>We save the line start/end time as an attribute within each raw_ping record.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.subset_by_time_and_beam" title="HSTB.kluster.modules.subset.FqprSubset.subset_by_time_and_beam"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subset_by_time_and_beam</span></code></a>(subset_time, subset_beam)</p></td>
<td><p>Subset an Fqpr instance according to the provided pairs of time,beam.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.subset_by_times" title="HSTB.kluster.modules.subset.FqprSubset.subset_by_times"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subset_by_times</span></code></a>(time_segments)</p></td>
<td><p>Only retain the portions of this Fqpr object that are within the time segments given in the list provided.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.subset_variables" title="HSTB.kluster.modules.subset.FqprSubset.subset_variables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subset_variables</span></code></a>(variable_selection[, ...])</p></td>
<td><p>Take specific variable names and return just those variables in a new xarray dataset.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#HSTB.kluster.modules.subset.FqprSubset.subset_variables_by_line" title="HSTB.kluster.modules.subset.FqprSubset.subset_variables_by_line"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subset_variables_by_line</span></code></a>(variable_selection)</p></td>
<td><p>Apply subset_variables to get the data split up into lines for the variable_selection provided</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes Documentation</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.is_subset">
<span class="sig-name descname"><span class="pre">is_subset</span></span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.is_subset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p class="rubric">Methods Documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.get_variable_by_filter">
<span class="sig-name descname"><span class="pre">get_variable_by_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selected_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by_sonar_head</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.get_variable_by_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>ping_filter is set upon selecting points in 2d/3d in Kluster.  See return_soundings_in_polygon.  Here we can take
those points and set one of the variables with new data.  Optionally, you can include a selected_index that is a list
of flattened indices to points in the ping_filter that you want to super-select.  See kluster_main.set_pointsview_points_status</p>
<p>new data are set in memory and saved to disk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – name of the variable to set, i.e. ‘detectioninfo’</p></li>
<li><p><strong>selected_index</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>]) – super_selection of the ping_filter selection, done in points_view currently when selecting with the mouse</p></li>
<li><p><strong>by_sonar_head</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, will return a list of arrays, one array for each sonar head.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.redo_subset">
<span class="sig-name descname"><span class="pre">redo_subset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.redo_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Subset by the existing subset times, used after reload to get the subset back</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.restore_subset">
<span class="sig-name descname"><span class="pre">restore_subset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.restore_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Restores the original data if subset_by_time has been run.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.return_soundings_in_polygon">
<span class="sig-name descname"><span class="pre">return_soundings_in_polygon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">polygon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geographic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_selection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('head',</span> <span class="pre">'x',</span> <span class="pre">'y',</span> <span class="pre">'z',</span> <span class="pre">'tvu',</span> <span class="pre">'detectioninfo',</span> <span class="pre">'time',</span> <span class="pre">'beam')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isolate_head</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.return_soundings_in_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Using provided coordinates (in either horizontal_crs projected or geographic coordinates), return the soundings
and sounding attributes for all soundings within the coordinates.</p>
<p>Using this method sets the ping_filter attribute so that you can now use the set_variable_by_filter and
get_variable_by_filter methods to get other variables or set data within the polygon selection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>polygon</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – (N, 2) array of points that make up the selection polygon</p></li>
<li><p><strong>geographic</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If True, the coordinates provided are geographic (latitude/longitude)</p></li>
<li><p><strong>variable_selection</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – list of the variables that you want to return for the soundings in the polygon</p></li>
<li><p><strong>isolate_head</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – only used with return_soundings, if provided will only return soundings corresponding to this head index,
0 = port, 1 = starboard</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of numpy arrays for each variable in variable selection</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.set_filter_by_polygon">
<span class="sig-name descname"><span class="pre">set_filter_by_polygon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">polygon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geographic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.set_filter_by_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Using this method sets the ping_filter attribute so that you can now use the set_variable_by_filter and
get_variable_by_filter methods to get other variables or set data within the polygon selection.</p>
<p>This is an alternative to return_soundings_in_polygon that you can use if you want to set the filter without
loading/returning a lot of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>polygon</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – (N, 2) array of points that make up the selection polygon</p></li>
<li><p><strong>geographic</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If True, the coordinates provided are geographic (latitude/longitude)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.set_variable_by_filter">
<span class="sig-name descname"><span class="pre">set_variable_by_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selected_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.set_variable_by_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>ping_filter is set upon selecting points in 2d/3d in Kluster.  See return_soundings_in_polygon.  Here we can take
those points and set one of the variables with new data.  Optionally, you can include a selected_index that is a list
of flattened indices to points in the ping_filter that you want to super-select.  See kluster_main.set_pointsview_points_status</p>
<p>new data are set in memory and saved to disk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – name of the variable to set, i.e. ‘detectioninfo’</p></li>
<li><p><strong>new_data</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – new data to set to the soundings selected by ping_filter for this variable.  Generally used for setting a new
sounding flag in detectioninfo, where all selected soundings would have new_data = 1 or 2</p></li>
<li><p><strong>selected_index</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>]) – super_selection of the ping_filter selection, done in points_view currently when selecting with the mouse</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.subset_by_lines">
<span class="sig-name descname"><span class="pre">subset_by_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.subset_by_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the logged start time, end time of the multibeam files to exclude data from all other lines.  The result is
the data only for the lines provided, concatenated into a single dataset.</p>
<p>To return to the full original dataset, use restore_subset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>]) – multibeam file names that you want to include in the subset datasets, all other lines are excluded</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.subset_by_time">
<span class="sig-name descname"><span class="pre">subset_by_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mintime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxtime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.subset_by_time" title="Permalink to this definition">¶</a></dt>
<dd><p>We save the line start/end time as an attribute within each raw_ping record.  Use this method to pull out
just the data that is within the mintime/maxtime range (inclusive mintime, exclusive maxtime).  The class will
then only have access to data within that time period.</p>
<p>To return to the full original dataset, use restore_subset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mintime</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – minimum time of the subset, if not provided and maxtime is, use the minimum time of the datasets</p></li>
<li><p><strong>maxtime</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – maximum time of the subset, if not provided and mintime is, use the maximum time of the datasets</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Error if True</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.subset_by_time_and_beam">
<span class="sig-name descname"><span class="pre">subset_by_time_and_beam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subset_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset_beam</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.subset_by_time_and_beam" title="Permalink to this definition">¶</a></dt>
<dd><p>Subset an Fqpr instance according to the provided pairs of time,beam.  In order to keep the fqpr in 2d space,
we subset the datasets to the unique times and then provide a boolean mask of those values that match
the provided time,beam combinations.</p>
<p>Note that the provided time,beam arrays must be the same shape, as they are treated as pairs of values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subset_time</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d array of utc timestamps, used to match the xarray dataset time coordinate</p></li>
<li><p><strong>subset_beam</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – 1d array of beam number, used to match the xarray dataset beam coordinate</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of 1d boolean mask arrays, that can be used to get the exact values of those points that match in time,beam.
length of this list is equal to the number of sonar heads, i.e. len(fqpr.multibeam.raw_ping)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.subset_by_times">
<span class="sig-name descname"><span class="pre">subset_by_times</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_segments</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.subset_by_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Only retain the portions of this Fqpr object that are within the time segments given in the list provided.  The
resultant datasets will be the portions of the datasets that lie within the list of time segments concatenated
together.</p>
<p>To return to the full original dataset, use restore_subset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time_segments</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>) – list of lists, where each sub list is the [start time of the segment in utc seconds, endtime of the segment
in utc seconds]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.subset_variables">
<span class="sig-name descname"><span class="pre">subset_variables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable_selection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ping_times</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_subset_by_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_by_detection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.subset_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Take specific variable names and return just those variables in a new xarray dataset.  If you provide ping_times,
either as the minmax of a range or individual times, it will return the variables just within those times.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable_selection</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>) – variable names you want from the fqpr dataset</p></li>
<li><p><strong>ping_times</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – time to select the dataset by, can either be an array of times (will use the min/max of the array to subset),
a float for a single time, or a tuple of (min time, max time).  If None, will use the min/max of the dataset</p></li>
<li><p><strong>skip_subset_by_time</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, will not run the subset by time method</p></li>
<li><p><strong>filter_by_detection</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, will filter the dataset by the detection info flag = 2 (rejected by multibeam system)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataset with just the variable_selection variables, optionally trimmed to times provided</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xr.Dataset</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="HSTB.kluster.modules.subset.FqprSubset.subset_variables_by_line">
<span class="sig-name descname"><span class="pre">subset_variables_by_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable_selection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ping_times</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_by_detection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#HSTB.kluster.modules.subset.FqprSubset.subset_variables_by_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply subset_variables to get the data split up into lines for the variable_selection provided</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable_selection</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>) – variable names you want from the fqpr dataset</p></li>
<li><p><strong>line_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – if provided, only returns data for the line(s), otherwise, returns data for all lines</p></li>
<li><p><strong>ping_times</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>]) – time to select the dataset by, must be a tuple of (min time, max time) in utc seconds.  If None, will use
the full min/max time of the dataset</p></li>
<li><p><strong>filter_by_detection</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, will filter the dataset by the detection info flag = 2 (rejected by multibeam system)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict of {linename: xr.Dataset} for each line name in the dataset (or just for the line names provided
if you provide line names)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">kluster</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../requirements/index.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quickstart - Basic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart_monitor/index.html">Quickstart - Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vessel_setup/index.html">Vessel Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processing/index.html">Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../surface/index.html">Surfacing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mosaic/index.html">Backscatter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mosaic/index.html#overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mosaic/index.html#about-avg-correction">About AVG Correction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mosaic/index.html#settings">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sonar_acceptance/index.html">Sonar Acceptance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cleaning/index.html">Cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../products/index.html">Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../settings/index.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indepth/index.html">Learn more about Kluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for_developers/index.html">For Developers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../kluster_api/index.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/fqpr_convenience.html">fqpr_convenience module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/fqpr_generation.html">fqpr_generation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/fqpr_project.html">fqpr_project module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/fqpr_intelligence.html">fqpr_intelligence module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/fqpr_actions.html">fqpr_actions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/fqpr_vessel.html">fqpr_vessel module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/monitor.html">monitor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/xarray_conversion.html">xarray_conversion module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/orientation.html">orientation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/beampointingvector.html">beampointingvector module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/svcorrect.html">svcorrect module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/georeference.html">georeference module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/tpu.html">tpu module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/backscatter.html">backscatter module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/visualizations.html">visualizations module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/sat.html">sat module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/wobble.html">wobble module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/export.html">export module</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../kluster_api/subset.html">subset module</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../kluster_api/subset.html#module-HSTB.kluster.modules.subset">HSTB.kluster.modules.subset Module</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../kluster_api/subset.html#functions">Functions</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../kluster_api/subset.html#classes">Classes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/rotations.html">rotations module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/pdal_entwine.html">pdal_entwine module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/dask_helpers.html">dask_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/fqpr_helpers.html">fqpr_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/gdal_helpers.html">gdal_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/numba_helpers.html">numba_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/pydro_helpers.html">pydro_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/xarray_helpers.html">xarray_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/utc_helpers.html">utc_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kluster_api/logging_conf.html">logging_conf module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changes List</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../kluster_api/index.html">API</a><ul>
  <li><a href="../kluster_api/subset.html">subset module</a><ul>
      <li>Previous: <a href="HSTB.kluster.modules.subset.filter_subset_by_polygon.html" title="previous chapter">filter_subset_by_polygon</a></li>
      <li>Next: <a href="../kluster_api/rotations.html" title="next chapter">rotations module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Eric Younkin.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/api/HSTB.kluster.modules.subset.FqprSubset.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>